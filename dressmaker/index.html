<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DressMate | Your Personal Wardrobe Companion</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="./assets/logo.png" />

    <script>
      // ðŸ›‘ Kept the Tailwind configuration inline as it must run before Tailwind loads
      tailwind.config = {
        theme: {
          extend: {
            animation: {
              pulse: "pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              pulse: {
                "0%, 100%": { opacity: 1 },
                "50%": { opacity: 0.5 },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* ðŸ›‘ Kept all CSS/Styles inline */
      body {
        font-family: "Poppins", sans-serif;
        background-color: #ffe6f0;
        min-height: 100vh;
      }

      .glass {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(10px);
      }

      /* FIX: Manually define the rotate class since CDN doesn't detect it in JS */
      .rotate-180 {
        transform: rotate(180deg);
      }

      /* Ensure the button is on top of everything else */
      #ai-chat-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
      }

      /* FAQ Container Styles */
      #ai-code-chatbot {
        position: fixed;
        bottom: 90px;
        right: 20px;
        z-index: 9998;
        width: 350px;
        height: 450px;
        display: none; /* Starts hidden, JS handles the toggle */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        transform: translateY(-10px);
      }

      /* Mobile Optimization */
      @media (max-width: 768px) {
        #ai-chat-toggle {
          bottom: 15px;
          right: 15px;
        }

        #ai-code-chatbot {
          width: 90vw;
          max-width: 300px;
          height: 400px;
          right: 5vw;
          bottom: 75px;
          transform: translateY(0);
        }
      }

      /* --- Custom Scrollbar Styles (for the FAQ container) --- */
      #chat-history {
        overflow-y: scroll;
        padding-right: 5px;
      }

      #chat-history::-webkit-scrollbar {
        width: 6px;
      }

      #chat-history::-webkit-scrollbar-thumb {
        background-color: #f472b6;
        border-radius: 10px;
      }

      #chat-history::-webkit-scrollbar-thumb:hover {
        background-color: #db2777;
      }

      #chat-history::-webkit-scrollbar-track {
        background-color: transparent;
      }
    </style>
  </head>

  <body class="text-center px-6">
    <main class="flex flex-col justify-center items-center min-h-screen w-full">
      <div
        class="glass p-10 rounded-2xl shadow-md max-w-sm w-full"
        data-aos="zoom-in"
        data-aos-duration="1000"
      >
        <img
          src="assets/logo.png"
          alt="DressMate Logo"
          class="mx-auto w-20 mb-4"
        />
        <h1
          class="text-3xl font-bold text-pink-700 mb-3"
          data-aos="fade-up"
          data-aos-delay="400"
        >
          DressMate
        </h1>
        <p
          class="text-gray-700 text-sm mb-8"
          data-aos="fade-up"
          data-aos-delay="600"
        >
          Your Personal Wardrobe Companion
        </p>

        <div class="space-y-3" data-aos="fade-up" data-aos-delay="800">
          <a
            href="register.html"
            class="block w-full bg-pink-500 hover:bg-pink-600 text-white py-2 rounded-full font-semibold transition border border-black"
          >
            <i class="fa-solid fa-user-plus mr-2"></i> Sign Up
          </a>
          <a
            href="login.html"
            class="block w-full bg-white border border-black text-pink-600 hover:bg-pink-50 py-2 rounded-full font-semibold transition"
          >
            <i class="fa-solid fa-right-to-bracket mr-2"></i> Log In
          </a>
        </div>
      </div>

      <footer class="mt-8 text-xs text-gray-500">
        Â© 2025 DressMate. All rights reserved.
      </footer>
    </main>

    <div
      id="ai-code-chatbot"
      class="glass rounded-xl shadow-2xl flex flex-col overflow-hidden"
      style="display: none"
    >
      <div
        class="p-3 bg-pink-700 text-white font-semibold flex justify-between items-center"
      >
        <span>DressMate FAQS</span>
        <button id="close-chat-btn" class="hover:text-pink-100">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div
        id="chat-history"
        class="flex-grow p-2 space-y-1 overflow-y-auto bg-white/70"
      ></div>
      <div
        class="p-3 bg-white/90 flex border-t border-gray-300"
        style="display: none"
      >
        <input
          type="text"
          id="chat-input"
          placeholder="Ask about your code..."
          class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none text-sm"
        />
        <button
          id="send-btn"
          class="bg-pink-500 hover:bg-pink-600 text-white px-4 rounded-r-lg transition"
        >
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <button
      id="ai-chat-toggle"
      class="bg-pink-700 hover:bg-pink-800 text-white p-4 rounded-full shadow-lg transition transform hover:scale-105"
    >
      <i class="fas fa-question fa-lg"></i>
    </button>

    <script>
      // Initialize AOS (Animation on Scroll)
      AOS.init();

      // Data structure for the FAQs, based on your DressMate documentation.
      const faqs = [
        {
          question: "What is DressMate and what problem does it solve?",
          answer:
            "DressMate is a personal **wardrobe companion application** designed to help users organize their clothing and plan outfits more efficiently. It solves the problem of wasting time and experiencing stress from deciding what to wear by providing a digital wardrobe and personalized outfit suggestions.",
        },
        {
          question: "What are the core functional features of the app?",
          answer:
            "The core functional features include **User Authentication** (Login/Sign-up), **Clothing Upload & Management** (categorizing items like tops, bottoms, shoes), a **Digital Wardrobe** view, and **Favorites & Collections** to save preferred outfits.",
        },
        {
          question: "What technology stack is being used for development?",
          answer:
            "The application uses **HTML and JavaScript** for the Frontend (UI) and **Supabase** for the Backend (logic & database). It will also integrate with Google Account and social media APIs.",
        },
        {
          question: "How will outfit suggestions be generated?",
          answer:
            "Outfit suggestions will be personalized and tailored for **daily wear, weekly plans, and special occasions**. The long-term plan is to enhance this with **AI-driven recommendations** based on weather or trends.",
        },
        {
          question: "What is the development approach and timeline?",
          answer:
            "The project follows the **Agile methodology** with a **12-week development timeline**. Key phases include Planning (Wk 1-2), UI/UX Design (Wk 3-4), Development (Wk 5-8), Testing (Wk 9-10), Beta Launch (Wk 11), and Final Deployment (Wk 12).",
        },
        {
          question: "How is user data and privacy secured?",
          answer:
            "Security is a priority. User accounts will be secured with **password protection**, and all sensitive data, including login credentials and wardrobe images, will be **encrypted** during storage and transmission to prevent unauthorized access.",
        },
        {
          question: "Who are the key members of the development team?",
          answer:
            "The team includes Denzel Ortiz (**Frontend & Backend Developer**), Nicole May Pacheco (**UI/UX Designer** and **QA**), Cris Rojo (**QA**), and Janrick Maningding & Eice Costuna (**Testing**).",
        },
      ];

      const faqContainer = document.getElementById("chat-history");
      const chatToggle = document.getElementById("ai-chat-toggle");
      const chatbotPanel = document.getElementById("ai-code-chatbot");
      const closeChatBtn = document.getElementById("close-chat-btn");
      const chatInputArea = document.querySelector(
        "#ai-code-chatbot > div:last-child"
      );

      /**
       * Helper function to convert markdown-style bolding (**word**) to HTML (<strong>word</strong>).
       * @param {string} text - The input text containing markdown-style bolding.
       * @returns {string} The text with HTML strong tags.
       */
      function formatAnswerText(text) {
        // Replace **word** with <strong>word</strong>
        return text.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");
      }

      /**
       * Creates the FAQ list in an accordion style.
       */
      function renderFaqs() {
        // Clear the initial message and add the instruction line
        faqContainer.innerHTML = `<div class="text-xs text-gray-500 text-center p-2">Click on a question to learn more about DressMate.</div>`;

        faqs.forEach((faq) => {
          // FAQ Item (Question Button)
          const questionBtn = document.createElement("button");
          // UPDATED: Added rounded-lg and border classes for the unified look
          questionBtn.className =
            "w-full text-left p-3 text-sm font-semibold text-pink-700 bg-white hover:bg-pink-50 border border-pink-200 flex justify-between items-center transition duration-300 rounded-lg mt-1 focus:outline-none";
          questionBtn.setAttribute("aria-expanded", "false");

          questionBtn.innerHTML = `
                <span>${faq.question}</span>
                <i class="fas fa-chevron-down text-xs ml-2 transition-transform duration-300"></i>
            `;

          // FAQ Answer (Collapsible Content)
          const answerDiv = document.createElement("div");
          // UPDATED: Removed vertical padding (py-3) and margin (mb-1) here for absolute zero collapse.
          answerDiv.className =
            "faq-answer px-4 text-sm text-gray-700 bg-gray-50/90 border border-t-0 border-pink-200 rounded-b-lg overflow-hidden max-h-0 transition-all duration-500 ease-in-out";

          const formattedAnswer = formatAnswerText(faq.answer);

          // UPDATED: Added vertical padding (py-3) to the inner paragraph for spacing when open.
          answerDiv.innerHTML = `<p class="leading-relaxed py-3">${formattedAnswer}</p>`;

          // Click Handler for Accordion
          questionBtn.addEventListener("click", () => {
            const isExpanded =
              questionBtn.getAttribute("aria-expanded") === "true";

            // Close other open answers
            document.querySelectorAll(".faq-answer").forEach((openAnswer) => {
              const openBtn = openAnswer.previousElementSibling;
              if (
                openAnswer !== answerDiv &&
                openBtn &&
                openBtn.getAttribute("aria-expanded") === "true"
              ) {
                // Ensure a smooth collapse on others
                openAnswer.style.maxHeight = openAnswer.scrollHeight + "px";
                openAnswer.offsetHeight; // Force repaint
                openAnswer.style.maxHeight = "0px";

                // Restore rounded corners on button and reset border
                openBtn.classList.remove("border-b-0");
                openBtn.classList.add("rounded-lg");

                openBtn.querySelector("i").classList.remove("rotate-180");
                openBtn.setAttribute("aria-expanded", "false");
              }
            });

            // Toggle current answer
            if (isExpanded) {
              // 1. Closing: Smoothly collapse by setting to '0px'.
              answerDiv.style.maxHeight = answerDiv.scrollHeight + "px";
              answerDiv.offsetHeight; // Force repaint
              answerDiv.style.maxHeight = "0px";

              // Restore rounded corners on button and reset border
              questionBtn.classList.remove("border-b-0");
              questionBtn.classList.add("rounded-lg");

              questionBtn.querySelector("i").classList.remove("rotate-180");
              questionBtn.setAttribute("aria-expanded", "false");
            } else {
              // 2. Opening: Set to scrollHeight for smooth transition.
              answerDiv.style.maxHeight = answerDiv.scrollHeight + "px";

              // Modify button styling when answer is open
              questionBtn.classList.add("border-b-0");
              questionBtn.classList.remove("rounded-lg");
              questionBtn.classList.add("rounded-t-lg"); // Keep top corners rounded

              questionBtn.querySelector("i").classList.add("rotate-180");
              questionBtn.setAttribute("aria-expanded", "true");

              // 3. FIX: After the transition (500ms), set maxHeight to 'none'
              setTimeout(() => {
                if (questionBtn.getAttribute("aria-expanded") === "true") {
                  answerDiv.style.maxHeight = "none";
                }
              }, 500);
            }
          });

          faqContainer.appendChild(questionBtn);
          faqContainer.appendChild(answerDiv);
        });
      }

      /**
       * Handles the visibility toggle of the FAQ panel.
       */
      function setupToggle() {
        let isFaqOpen = false;

        const togglePanel = () => {
          isFaqOpen = !isFaqOpen;
          chatbotPanel.style.display = isFaqOpen ? "flex" : "none";

          // Change the button icon when open/closed
          chatToggle.querySelector("i").className = isFaqOpen
            ? "fas fa-times fa-lg"
            : "fas fa-question fa-lg";
        };

        chatToggle.addEventListener("click", togglePanel);
        closeChatBtn.addEventListener("click", togglePanel);
      }

      // Initialize the functionality when the script loads
      document.addEventListener("DOMContentLoaded", () => {
        // Hide the input field permanently
        if (chatInputArea) {
          chatInputArea.style.display = "none";
        }

        if (faqContainer) {
          renderFaqs();
        }
        setupToggle();
      });
    </script>
  </body>
</html>
